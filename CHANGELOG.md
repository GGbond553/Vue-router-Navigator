# Vue-Router-Navigator 更新日志

## v0.5.0

### 🎯 重大重构
- **全面简化检测流程**：移除content.js中冗余的检测与检验流程，简化代码结构，减少整体代码长度
- **popup页面彻底重构**：完全移除原有功能模块（状态检测、清除缓存、打开DevTools按钮），转为信息展示页面
- **代码优化**：通过简化逻辑和移除冗余代码，显著减少文件大小和复杂度

### ✨ 新增功能
- **全新视觉设计**：popup页面采用渐变背景和毛玻璃效果，提升视觉体验
- **信息丰富度提升**：新增核心功能展示区和特性说明，提供更完整的产品信息
- **状态指示器优化**：保留并改进状态指示器，以更优雅的方式显示路由检测状态

### 🔧 技术改进
- **检测逻辑简化**：将performRouterDetection方法从80+行简化为30行，移除重复检测逻辑
- **extractRoutes优化**：简化路由提取逻辑，提高代码可读性和维护性
- **错误处理改进**：采用更简洁的错误处理方式，移除冗余的try-catch块

## v0.4.4

### 🐛 错误修复
- **修复"未检测到 Vue Router 但悬浮窗正常"问题**：解决popup页面显示未检测到但悬浮窗功能可用的问题
- **优化getStatus消息处理**：增加轮询检测机制，确保路由检测完成后再返回状态
- **增加重试机制**：popup在消息发送失败时等待500ms后重试，避免content script尚未加载完成的问题

### 🔧 技术改进
- **路由检测速度优化**：将detectRouter的检测间隔从100ms减少到50ms，加快检测速度
- **状态检测可靠性增强**：getStatus消息处理增加1秒最大等待时间，确保检测结果准确

## v0.4.3

### 🐛 错误修复
- **修复passive event listener警告**：解决在content.js中"Unable to preventDefault inside passive event listener invocation"的警告
- **优化事件监听器配置**：为keydown事件监听器添加capture: true选项，确保preventDefault()能正常工作

## v0.4.2

### 🐛 错误修复
- **修复状态共享问题**：popup现在直接与悬浮窗共享状态，不再进行独立检测
- **简化消息传递逻辑**：删除了popup中的超时处理、重试机制和content script重新注入逻辑
- **优化状态显示**：统一使用悬浮窗的路由检测结果，确保状态一致性

### 🔧 技术改进
- **状态共享机制**：popup直接向悬浮窗请求状态，避免重复检测
- **代码简化**：移除了popup中的复杂错误处理和重试逻辑
- **性能优化**：减少了不必要的消息传递和重试操作

## v0.4.1

### 🐛 错误修复
- **修复Vue Router检测问题**：解决在Vue页面中显示"未检测到 Vue Router"但功能可用的问题
- **增强路由检测逻辑**：添加更多Vue Router检测策略，提高检测准确性
- **优化消息传递机制**：增加路由检测等待时间，确保检测结果正确返回

### 🔧 技术改进
- **路由检测增强**：
  - 添加从全局Vue实例获取路由的检测方式
  - 增加路由提取策略，支持更多路由配置格式
  - 改进路由检测频率和准确性，检测到路由后提前结束检测
- **状态反馈优化**：增加控制台日志输出，便于调试路由检测状态
- **超时时间调整**：延长popup状态检测超时时间和重试等待时间，给路由检测更多时间
- **消息监听器改进**：在未检测到路由时增加等待时间，确保检测结果准确

## v0.4.0

### 🐛 错误修复
- **修复状态检测问题**：解决插件功能正常但popup页面显示"连接失败"的问题
- **改进错误处理**：区分不同类型的错误并提供更准确的状态提示
- **优化消息传递**：添加超时处理和自动重试机制，提高状态检测的可靠性

### 🔧 技术改进
- **状态提示优化**：将"连接失败"改为更具体的错误描述，如"页面加载中..."、"页面不支持"或"检测失败"
- **自动重试机制**：当消息发送失败时自动尝试重新注入content script
- **权限扩展**：添加"scripting"权限，使popup能够重新注入content script
- **消息监听器增强**：改进消息监听器，确保返回最新的路由状态并支持异步响应

## v0.3.2

### 🔧 技术改进
- **搜索框智能交互优化**：聚焦时自动检测内容并触发搜索，取消搜索结果数量限制
- **用户体验提升**：搜索框获得焦点后，有内容时自动展开下拉框显示所有匹配结果

## v0.3.1

### 🐛 错误修复
- **修复Enter键搜索无反应**：优化搜索框Enter键处理逻辑，确保有搜索结果时能正确触发跳转
- **悬浮窗尺寸变化边缘检测**：新增宽度和高度变化时的自动边缘检测机制，确保悬浮窗始终保持在可视区域内

### 🔧 技术改进  
- **边缘检测优化**：拖拽过程中使用简单边界限制确保流畅性，拖拽停止后执行完整的边缘碰撞检测
- **尺寸变化检测**：在搜索结果展示、菜单切换等场景下自动检测边缘位置
- **版本号统一**：修复项目中版本号不一致的问题，统一以manifest.json为准
- **代码清理**：移除所有调试console日志，优化代码结构
- **搜索框智能交互**：聚焦时自动检测内容并触发搜索，提升用户体验

---

## v0.3.0

### ✨ 新增功能
- **搜索框聚焦交互**：聚焦时扩大宽度，未聚焦恢复
- **搜索框回车交互**：渐变切换至搜索结果
- **窗口大小变化动画**：平滑重置至左上角
- **悬浮窗未聚焦状态**：透明度降至0.1
- **返回按钮**：支持一键返回上级菜单

### 🎨 样式优化
- **信息分行显示**：名称与路由路径分开两行展示
- **搜索结果区域限制**：最大宽度100px，最大高度75px，支持纵向滚动
- **悬浮窗默认位置**：右侧无间距停靠
- **顶部可拖拽区域**：增加高度提升操作便利性

### 🔧 代码优化
- 缩短整体代码长度，提升可维护性

---

## v0.2.2

### 🎯 交互体验优化
- **路由跳转自动隐藏**：点击路由后下拉菜单自动隐藏并正确重置状态
- **动画效果增强**：下拉菜单添加平滑过渡动画和悬停效果
- **宽度自适应**：下拉菜单支持min-width: 200px，max-width: min(400px, 90vw)
- **默认位置优化**：悬浮窗默认显示在右上角，距离边缘16px间距

### 🔧 技术改进
- **状态管理修复**：解决路由跳转后需要点击两次才能重新打开菜单的问题
- **CSS布局优化**：调整overflow属性确保下拉菜单正确显示
- **调试日志增强**：添加详细的元素状态检查日志便于问题排查

---

## v0.2.1

### 🔧 错误修复
- **修复存储错误**：添加chrome.storage.local存在性检查，防止Cannot read properties of undefined错误
- **代码重构**：整理项目目录结构，按功能模块分类放置文件

### 📁 项目结构优化
- 创建src目录，按功能分类：background、content、popup、devtools、styles
- 更新所有文件引用路径，确保模块化管理

---

## v0.2.0

### 🎨 悬浮窗交互优化
- **尺寸自适应**：悬浮窗最大宽度限制为100px，高度根据内容自适应调整
- **智能滚动**：当路由名称或路径长度超过悬浮窗宽度时，鼠标悬停触发自动滚动
  - 初始向右滚动，滚动至终点前执行流畅的减速停止动画
  - 右侧停留1秒后自动切换向左滚动，同样带有减速动画
  - 鼠标移出时立即重置到最左侧初始位置
- **视觉优化**：调整字体大小和间距，确保在紧凑空间内信息清晰可读

### 🔧 技术改进
- 添加滚动动画管理系统，支持多个内容行同时滚动
- 优化CSS过渡效果，使用cubic-bezier缓动函数实现自然滚动
- 改进事件监听机制，避免内存泄漏

### 🐛 问题修复
- 修复悬浮窗尺寸过小导致信息截断的问题
- 修复长路由名称显示不完整的问题

---

## v0.1.0

### ✨ 初始版本
- 自动嗅探Vue Router实例（支持Vue2/Vue3）
- 一键路由跳转功能
- 多级嵌套菜单展示
- 可拖拽悬浮窗，位置记忆
- 快捷键支持（Alt+R / Ctrl+K）
- 黑白灰极简设计
- DevTools集成面板
- 右键上下文菜单
- 仅在localhost环境生效的安全机制